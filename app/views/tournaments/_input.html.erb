<% form_for(@tournament) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label "Название" %><br />
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.label "Организатор" %><br />
    <%= f.select :user_id, @users.collect {|u| [ u.to_s, u.id ] } %>
  </p>
  <p>
    <%= f.label "Нужны ли составы?" %><br />
    <%= f.check_box :needTeams %>
  </p>
  <p>
    <%= f.label "Принимаются ли апелляции на снятие?" %><br />
    <%= f.check_box :appeal_for_dismiss %>
  </p>
  <p>
    <%= f.label "Требуется ли фамилия капитана при внесении результатов?" %><br />
    <%= f.check_box :cap_name_required %>
  </p>
  <p>
    <%= f.label "Требуется ли время начала игры?" %><br />
    <%= f.check_box :time_required %>
  </p>
  <p>
    <%= f.label "Система подсчета результатов" %><br />
    <%= collection_select(:tournament, :calc_system_id, CalcSystem.all, :id, :name) %> 
  </p>
 <p>Возможные города-участники<br />
    <%= f.label "Все" %>
    <%= f.check_box :every_city, {:id => "every_city"} %>
  	<%= observe_field("every_city", :function => "var boxes = jQuery('.city_checkbox'); boxes.attr('checked', false); var checked = jQuery('#every_city').attr('checked'); boxes.attr('disabled', checked)") %><br />
      <% for c in @cities -%>
         <%= check_box_tag "tournament[city_ids][]", c.id, city(c), :class => 'city_checkbox' %>
         <%= c.name -%>
      <% end -%><br />
<!-- Если список потенциальных городов-участников неполон, вы можете дополнить его <%= link_to 'здесь', cities_path %> -->
  </p>
  <p>
    <%= f.submit 'Сохранить' %>
  </p>
<% end %>
<%= link_to_function 'Назад', 'history.back()' %>